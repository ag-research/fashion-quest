---
conditions:
  ?
    - @props['cloak'].location != 'player' && @props['cloak'].location != 'bar'
  :
    - bar_light

  ?
    - @props['cloak'].location == 'player' || @props['cloak'].location == 'bar'
  :
    - bar_dark

  ?
    - @props['hook'].traits['supporting'] && @props['hook'].traits['supporting'].index('cloak')
  :
    - coat_hung

outcomes:

  bar_light: |
    @locations['bar'].dark = false
    ""

  bar_dark: |
    @locations['bar'].dark = 'safe'
    ""

  coat_hung: |
    @game.set_score('cloak_on_hook')
