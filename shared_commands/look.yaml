---
syntax:
- "l"
- "look"
- "look <prop:noun>"
- "look <character:noun>"
- "look <door:noun>"

logic: |

  noun = arg['noun']

  #noun = '' if not noun

  output = ''

  if noun

    description = ''

    # If attempting to look at a character, check for description
    if characters[noun.name]
      if noun.dead == true
        description = "#{noun.noun_cap} appears to be dead.\n"
      elsif noun.description
        description = noun.description + "\n"
      end
    end

    # If attempting to look at an prop, check for description and trigger on_look event
    if props[noun.name]
      if noun.description
        description = noun.description + "\n"
      end
      description << game.event(noun, 'on_look')
    end

    # If attempting to look at a door, check for descripton
    if doors[noun.name]
      if noun.description
        description = noun.description + "\n"
      end
    end

    # If no description was found, inform user
    if description == ''
      description = "You see nothing special.\n"
    end

    output = description

  else

    # Show location image, if any
    show_image(locations[location].image_file)

    # Show location description
    output = locations[location].describe(doors, props, characters, player.has_lit_item)

  end

  output
