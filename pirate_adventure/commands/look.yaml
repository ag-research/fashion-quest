---
syntax:
- "l"
- "look"
- "look <prop:noun>"
- "look <character:noun>"
- "look <door:noun>"

logic: |

  noun = arg['noun']

  noun = '' if not noun

  output = ''

  if not noun.empty?

    description = ''

    # If attempting to look at a character, check for description
    if characters[noun]
      if characters[noun].dead == true
        description = "#{characters[noun].noun_cap} appears to be dead.\n"
      elsif characters[noun].description
        description = characters[noun].description + "\n"
      end
    end

    # If attempting to look at an prop, check for description
    if props[noun]
      if props[noun].description
        description = props[noun].description + "\n"
      end
    end

    # If attempting to look at a door, check for descripton
    if doors[noun]
      if doors[noun].description
        description = doors[noun].description + "\n"
      end
    end

    # If no description was found, inform user
    if description == ''
      description = "You see nothing special.\n"
    end

    output = description

  else

    # Show image, if any
    if FileTest.exists?(locations[location].image_file)
      @image_stack.clear { @image_stack.image locations[location].image_file }
    else
      @image_stack.clear { }
    end

    output = locations[location].describe(doors, props, characters, player.has_lit_item)

    if output == ''
      output = 'Whoa!'
    end

  end

  output
