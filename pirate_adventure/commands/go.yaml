---
syntax:
- "go <direction>"

logic: |

  direction = arg['direction']

  game.state['paces'] = 0

  # If an exit exists, load destination location and issue look command
  if (locations[location].exits[direction])

    # If player is trying to move around in the dark, kill player
    if locations[location].dark and !player.has_lit_item

      game.over = true
      return "You trip in the dark and break your neck.\nWould you like to restart? (y/n)\n"

    else

      player.location = locations[location].exits[direction]['destination']

      return '>look'

    end

  # Otherwise check for a door
  elsif doors[direction]

    door = direction

    # If the door exists in the player's location, try it
    if doors[door].locations.include?(player.location)

      # Go through door, if it's open
      if doors[door].traits['opened']

        attempt_successful = doors[door].attempt_entry(player, props)

        if attempt_successful
          return '>look'
        else
          return "Something won't fit through.\n"
        end

      else

        return "It's not open.\n"

      end

    else

      return "You can't go that way.\n"
    end

  else

    return "You can't go that way.\n"

  end
